import{r as b,l as v,o as c,c as d,a,u as r,w as m,F as p,Z as g,b as e,d as S,e as k,v as x,t as f,f as y,j as w,i as C,g as N,O as R}from"./app-7d60c342.js";import V from"./ContentHeader-9b43fad5.js";import{_ as j}from"./AuthenticatedLayout-5fb31fac.js";import{S as E}from"./sweetalert2.all-4f6debde.js";import O from"./MyChoices-5d818d72.js";import"./avatar-1-5707a8d9.js";const B={class:"row justify-content-center"},M={class:"col-sm-4"},P={class:"card"},D=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"Create New Role")],-1),F={class:"card-body"},G={class:"form-group"},T=e("label",{class:"form-label"},"Role Name",-1),A={key:0,class:"text-danger"},L={class:"form-group mt-3"},U=e("label",{class:"form-label"},"Select Permission(s)",-1),Z=["value","selected"],q={class:"card-footer d-grid gap-2"},z=e("button",{type:"submit",class:"btn btn-success"},"Save",-1),X={__name:"Edit",props:{errors:Object,role:Object,_permissions:Object},setup(i){const l=i,_=[{title:"Administrator",active:!0},{title:"Role management",active:!1,link:route("admin.role.index")},{title:"Create Role",active:!0}];let t=b({name:l.role.name,permissions:[]});v(()=>{l.role.permissions.forEach(function(s){t.permissions.push(s.id),$("#formCheck"+s.id).prop("checked",!0)}),console.log(t)});let u=()=>{R.put(route("admin.role.update",l.role),t,{onSuccess:s=>{s.props.response.success&&E.fire("Success!",s.props.response.succes,"success")}})},h=s=>{t.permissions=s};return l.role.permissions.forEach(function(s){t.permissions.push(s.id)}),(s,n)=>(c(),d(p,null,[a(r(g),{title:"Create Role"}),a(j,null,{default:m(()=>[a(V,{title:"Create Role",breadcrumbs:_}),e("div",B,[e("div",M,[e("div",P,[D,e("form",{onSubmit:n[1]||(n[1]=S((...o)=>r(u)&&r(u)(...o),["prevent"]))},[e("div",F,[e("div",G,[T,k(e("input",{type:"text",class:"form-control",placeholder:"Enter Role Name","onUpdate:modelValue":n[0]||(n[0]=o=>r(t).name=o)},null,512),[[x,r(t).name]]),i.errors.name?(c(),d("span",A,f(i.errors.name),1)):y("",!0)]),e("div",L,[U,a(O,{id:"selectpermission",placeholder:"Select Permission",type:"multiple",onGetValue:r(h)},{default:m(()=>[(c(!0),d(p,null,w(i._permissions,o=>(c(),d("option",{key:o.id,value:o.id,selected:r(t).permissions.includes(o.id)},f(o.name),9,Z))),128))]),_:1},8,["onGetValue"])])]),e("div",q,[z,a(r(C),{href:s.route("admin.role.index"),class:"btn btn-light"},{default:m(()=>[N("Back")]),_:1},8,["href"])])],32)])])])]),_:1})],64))}};export{X as default};
